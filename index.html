<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
<p>Список ответов</p>
<select id="list">
  <option value="js">JavaScript</option>
  <option value="php">PHP</option>
  <option value="c#">Csharp</option>
  <option value="java">Java</option>
  <option value="node">Node.js</option>
</select>

</body>
<script type="text/javascript">

    $(document).ready(function(){
        getSelectValue();
    });

    function getSelectValue(e){
  let selectedValue = e.target.value;
  
  switch(selectedValue) {
    case 'js':
      frameCommunicationSend({'action': 'send', 'message': 'Send message'});
      break;
    case 'php':
      frameCommunicationSend({'action': 'send', 'message': 'Send message'});
      break;
    case 'c#':
      frameCommunicationSend({'action': 'send', 'message': 'Send message'});
      break;
    case 'java':
      frameCommunicationSend({'action': 'send', 'message': 'Send message'});
      break;
    case 'node':
      frameCommunicationSend({'action': 'send', 'message': 'Send message'});
      break;
  }
}

const list = document.querySelector('#list');

list.addEventListener('change', function(e) {  
  getSelectValue(e)
});

    function frameCommunicationInit()
    {
        if (!window.frameCommunication)
        {
            window.frameCommunication = {timeout: {}};
        }
        if(typeof window.postMessage === 'function')
        {
            window.addEventListener('message', function(event){
                var data = {};
                try { data = JSON.parse(event.data); } catch (err){}

                if (data.action == 'init')
                {
                    frameCommunication.uniqueLoadId = data.uniqueLoadId;
                    frameCommunication.postMessageSource = event.source;
                    frameCommunication.postMessageOrigin = event.origin;
                }
            });
        }
    }
    // функция отправки данных в основное окно
    function frameCommunicationSend(data)
    {
        data['uniqueLoadId'] = frameCommunication.uniqueLoadId;
        var encodedData = JSON.stringify(data);
        if (!frameCommunication.postMessageOrigin)
        {
            clearTimeout(frameCommunication.timeout[encodedData]);
            frameCommunication.timeout[encodedData] = setTimeout(function(){
                frameCommunicationSend(data);
            }, 10);
            return true;
        }

        if(typeof window.postMessage === 'function')
        {
            if(frameCommunication.postMessageSource)
            {
                frameCommunication.postMessageSource.postMessage(
                    encodedData,
                    frameCommunication.postMessageOrigin
                );
            }
        }
    }
    frameCommunicationInit();

</script>
</html>
